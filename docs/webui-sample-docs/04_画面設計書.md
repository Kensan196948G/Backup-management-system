# 画面設計書

**プロジェクト名:** バックアップ管理システム WebUI
**バージョン:** 1.0.0
**作成日:** 2026-02-25

---

## 1. 画面一覧

| 画面ID | 画面名 | URL パス | 認証 | 最低ロール |
|--------|--------|---------|------|----------|
| SCR-001 | ログイン画面 | `/login` | 不要 | - |
| SCR-002 | ダッシュボード | `/dashboard` | 必要 | Viewer |
| SCR-003 | ジョブ一覧 | `/jobs` | 必要 | Viewer |
| SCR-004 | ジョブ詳細 | `/jobs/:id` | 必要 | Viewer |
| SCR-005 | ジョブ作成 | `/jobs/new` | 必要 | Operator |
| SCR-006 | ジョブ編集 | `/jobs/:id/edit` | 必要 | Operator |
| SCR-007 | レポート一覧 | `/reports` | 必要 | Viewer |
| SCR-008 | レポート詳細 | `/reports/:id` | 必要 | Viewer |
| SCR-009 | アラート一覧 | `/alerts` | 必要 | Viewer |
| SCR-010 | アラートルール設定 | `/alerts/rules` | 必要 | Operator |
| SCR-011 | ユーザー管理 | `/settings/users` | 必要 | Admin |
| SCR-012 | システム設定 | `/settings/system` | 必要 | Admin |
| SCR-013 | プロフィール設定 | `/profile` | 必要 | Viewer |
| SCR-014 | 404 エラー | `/404` | 不要 | - |

---

## 2. 画面遷移図（テキスト表現）

```
[ログイン画面 SCR-001]
    │ 認証成功
    ▼
[ダッシュボード SCR-002]
    ├──> サマリーカード（失敗ジョブ）クリック
    │       ▼
    │   [ジョブ一覧 SCR-003]（フィルタ: 失敗）
    │
    ├──> ジョブタイムラインのバーをクリック
    │       ▼
    │   [ジョブ詳細 SCR-004]
    │
    └──> 「新規ジョブ作成」ボタン
            ▼
        [ジョブ作成 SCR-005]
                │ 保存成功
                ▼
            [ジョブ詳細 SCR-004]

[ジョブ一覧 SCR-003]
    ├──> 行クリック ──> [ジョブ詳細 SCR-004]
    ├──> 「編集」アイコン ──> [ジョブ編集 SCR-006]
    └──> 「新規作成」ボタン ──> [ジョブ作成 SCR-005]

[ジョブ詳細 SCR-004]
    └──> 「設定を編集」タブ ──> [ジョブ編集 SCR-006]
```

---

## 3. 各画面レイアウト仕様

---

### SCR-001: ログイン画面

**レイアウト:**
```
┌─────────────────────────────────────────┐
│         [企業ロゴ]                        │
│                                          │
│   ┌──────────────────────────────────┐   │
│   │   バックアップ管理システム         │   │
│   │                                  │   │
│   │   メールアドレス                  │   │
│   │   [___________________________]  │   │
│   │                                  │   │
│   │   パスワード                      │   │
│   │   [___________________________]  │   │
│   │                                  │   │
│   │   □ ログイン状態を保持する         │   │
│   │                                  │   │
│   │   [  ログイン  ]                  │   │
│   │                                  │   │
│   │   パスワードをお忘れですか？       │   │
│   └──────────────────────────────────┘   │
│                                          │
│   v1.0.0 © 2026 Backup Management       │
└─────────────────────────────────────────┘
```

**コンポーネント:**
- ロゴ: 会社ロゴ（SVG・最大高さ 64px）
- フォームカード: 幅 400px・中央配置・影付き
- メールアドレス: `<input type="email">` 必須・バリデーション
- パスワード: `<input type="password">` 表示切替アイコン付き
- チェックボックス: セッション継続（7 日間）
- ログインボタン: Primary・幅 100%
- パスワードリセットリンク: `/password-reset`

**エラー表示:**
- 認証失敗: フォーム上部に赤色バナー「メールアドレスまたはパスワードが正しくありません」
- 5 回失敗: 「アカウントがロックされました。管理者にお問い合わせください。」

---

### SCR-002: ダッシュボード

**レイアウト:**
```
┌──────────────────────────────────────────────────────┐
│ [ロゴ]  バックアップ管理システム      [通知ベル] [ユーザー▼]│
├──────────┬───────────────────────────────────────────┤
│          │  ダッシュボード               [期間: 24h ▼]│
│ ■ ダッシュ│                                          │
│   ボード  │  ┌──────┐ ┌──────┐ ┌──────┐ ┌──────┐   │
│          │  │ 成功  │ │ 失敗  │ │実行中│ │スト  │   │
│ □ ジョブ  │  │  24  │ │   2  │ │   1  │ │レージ│   │
│   管理    │  │ 件   │ │ 件   │ │ 件   │ │ 68% │   │
│          │  └──────┘ └──────┘ └──────┘ └──────┘   │
│ □ レポート│                                          │
│          │  ┌────────────────────────────────────┐  │
│ □ アラート│  │ バックアップタイムライン              │  │
│          │  │ [===================タイムライン=====│  │
│ ─────────│  └────────────────────────────────────┘  │
│ □ 設定   │                                          │
│          │  ┌─────────────────┐ ┌─────────────────┐ │
│ □ ヘルプ  │  │ 最近の失敗ジョブ  │ │ ストレージ推移  │ │
│          │  │ ...             │ │ [グラフ]        │ │
│ [ユーザー]│  └─────────────────┘ └─────────────────┘ │
└──────────┴───────────────────────────────────────────┘
```

**コンポーネント詳細:**
- トップバー: 高さ 64px・ロゴ・通知ベル（バッジ付き）・ユーザードロップダウン
- サイドバー: 幅 240px（折りたたみ可能）・ダークバックグラウンド
- メインコンテンツ: パディング 24px・グレー背景
- サマリーカード: 4 カラムグリッド・ホバー時に影
- タイムライン: フルワイドカード・D3.js によるインタラクティブグラフ
- 下段: 2 カラムグリッド

---

### SCR-003: ジョブ一覧

**レイアウト:**
```
┌──────────────────────────────────────────────────────┐
│ [ナビゲーション（省略）]                                │
├──────────────────────────────────────────────────────┤
│ ジョブ管理                    [+ 新規ジョブ作成]       │
│ ホーム > ジョブ管理                                    │
│                                                      │
│ ┌──────────────────────────────────────────────────┐ │
│ │ [🔍 ジョブ名で検索...]  [ステータス▼] [日付範囲▼]   │ │
│ │                          [フィルタークリア]        │ │
│ ├──────────────────────────────────────────────────┤ │
│ │ □ | ジョブ名    | ステータス | 最終実行 | 次回実行 | │ │
│ │──────────────────────────────────────────────────│ │
│ │ □ | 日次フル BK | ● 成功    | 昨日 23:00 | 今夜  | │ │
│ │ □ | 増分 DB BK  | ● 失敗    | 1時間前    | -     | │ │
│ │ □ | 週次アーカ  | ○ 無効    | 先週日曜   | -     | │ │
│ └──────────────────────────────────────────────────┘ │
│ 全 47 件中 1-25 件表示  [< 1 2 >] [25件/頁▼]          │
└──────────────────────────────────────────────────────┘
```

---

### SCR-005: ジョブ作成（ウィザード）

**レイアウト:**
```
┌──────────────────────────────────────────────────────┐
│ 新規ジョブ作成                                        │
│                                                      │
│  ①基本設定 ──── ②ソース ──── ③保存先 ──── ④スケジュール ──── ⑤通知 │
│  [●完了]       [●現在]      [○未完]     [○未完]          [○未完]│
│                                                      │
│  ┌────────────────────────────────────────────────┐  │
│  │ バックアップ対象の選択                            │  │
│  │                                                │  │
│  │ ○ ファイル / フォルダ                            │  │
│  │ ● ボリューム / ドライブ                          │  │
│  │ ○ 仮想マシン（VM）                               │  │
│  │                                                │  │
│  │ 対象パス:                                       │  │
│  │ [D:\Data\                      ] [参照]         │  │
│  │                                                │  │
│  │ 除外パターン（任意）:                             │  │
│  │ [*.tmp                         ] [+ 追加]       │  │
│  └────────────────────────────────────────────────┘  │
│                                                      │
│  [← 前へ]                              [次へ →]      │
└──────────────────────────────────────────────────────┘
```

---

## 4. モーダル・ダイアログ仕様

### 4.1 削除確認ダイアログ

```
┌──────────────────────────────────────┐
│ ジョブを削除しますか？                  │
│                                      │
│ 「日次フルバックアップ」を削除します。   │
│ この操作は取り消せません。             │
│                                      │
│ 確認のため、ジョブ名を入力してください: │
│ [___________________________]        │
│                                      │
│       [キャンセル] [削除する]          │
└──────────────────────────────────────┘
```

### 4.2 トースト通知

- **位置:** 右上（top: 16px, right: 16px）
- **最大表示数:** 3 件（それ以上はキュー）
- **自動消去:** 成功 3 秒 / 警告 5 秒 / エラー 手動解除

---

## 更新履歴

| 日付 | バージョン | 更新者 | 内容 |
|------|-----------|--------|------|
| 2026-02-25 | 1.0.0 | システム管理者 | 初版作成 |
