# アクセシビリティ仕様書

**プロジェクト名:** バックアップ管理システム WebUI
**バージョン:** 1.0.0
**作成日:** 2026-02-25
**準拠基準:** WCAG 2.1 Level AA

---

## 1. 準拠基準

本システムは **WCAG 2.1 Level AA** への準拠を目標とします。
4 つの設計原則（POUR）に基づいて実装します。

---

## 2. 知覚可能性（Perceivable）

### 2.1 代替テキスト（1.1.1）

- すべての非テキストコンテンツに代替テキストを提供する
- アイコンボタン: `aria-label` で目的を説明する
- 装飾的な画像: `alt=""` を設定する
- 意味のあるグラフ・チャート: `aria-label` または `aria-describedby` で説明する

**実装例:**
```jsx
// 良い例
<button aria-label="ジョブを削除">
  <TrashIcon aria-hidden="true" />
</button>

// 悪い例
<button>
  <TrashIcon />
</button>
```

### 2.2 時間依存メディア（1.2）

- 動画コンテンツがある場合はキャプションを提供する（現バージョンでは動画コンテンツなし）

### 2.3 適応可能（1.3）

**情報と関係性（1.3.1）:**
- テーブルには適切な `<th>` と `scope` 属性を使用する
- フォームには `<label>` と `for` の関連付けを行う
- 関連するフォームグループは `<fieldset>` + `<legend>` でグループ化する

**意味のある順序（1.3.2）:**
- DOM 順序が視覚的な順序と一致するようにする
- CSS で視覚的な順序を変えた場合、読み上げ順序への影響を確認する

**感覚的な特徴（1.3.3）:**
- 「右側のボタン」「赤い項目」など、形・色・位置のみに依存した説明をしない

**向き（1.3.4）:**
- コンテンツの表示を特定の向きに固定しない

**入力目的の特定（1.3.5）:**
- 名前・メールアドレス等の入力には `autocomplete` 属性を設定する

### 2.4 判別可能（1.4）

**カラーコントラスト（1.4.3）:**

| 要素 | 最低コントラスト比（AA） |
|------|---------------------|
| 通常テキスト（18px 未満） | 4.5:1 |
| 大きなテキスト（18px 以上 / 14px 太字以上） | 3:1 |
| UI コンポーネント・グラフィック | 3:1 |

**カラーの使用（1.4.1）:**
- ステータスの表現は色だけでなく、アイコン・テキストでも伝える

**テキストのサイズ変更（1.4.4）:**
- テキストを 200% まで拡大しても機能・コンテンツが失われないこと

**テキストの画像不使用（1.4.5）:**
- テキストは画像でなく実テキストで表示する

**コントラスト（強化）（1.4.6）:**
- 可能な限り 7:1 以上のコントラスト比を目指す

---

## 3. 操作可能性（Operable）

### 3.1 キーボードアクセシビリティ（2.1）

**すべての機能をキーボードで操作可能にする（2.1.1）:**

| 操作 | キー |
|------|------|
| フォーカス移動 | Tab / Shift+Tab |
| ボタン・リンクの実行 | Enter / Space |
| ドロップダウン選択 | ↑↓ 矢印キー + Enter |
| ダイアログを閉じる | Esc |
| テーブル内移動 | ←→↑↓ 矢印キー |
| ウィザードのステップ | Tab（次項目） / Shift+Tab（前項目） |

**キーボードトラップの防止（2.1.2）:**
- モーダル内ではフォーカスをトラップする（背景要素への Tab を防ぐ）
- モーダルを閉じると元のフォーカス位置に戻る

### 3.2 十分な時間（2.2）

- セッションタイムアウトの 2 分前に警告を表示する
- ユーザーが延長できる選択肢を提供する
- 自動更新コンテンツはユーザーが一時停止できるようにする

### 3.3 発作と身体的反応（2.3）

- フラッシュするコンテンツは 3 回/秒 未満に抑える（または使用しない）

### 3.4 ナビゲーション可能（2.4）

**スキップリンク（2.4.1）:**
- ページ先頭に「メインコンテンツへスキップ」リンクを配置する

**ページタイトル（2.4.2）:**
- 各ページに一意のタイトルを付与する（`<title>` タグ）
- 例: `ジョブ一覧 | バックアップ管理システム`

**フォーカスの順序（2.4.3）:**
- フォーカス順序が論理的・意味的な順序に従うようにする

**リンクの目的（2.4.4）:**
- リンクテキストはその目的を単独で理解できるようにする
- 「こちら」「詳細」のような曖昧なリンクテキストを避ける

**見出し構造（2.4.6）:**
- 見出しは適切な階層（h1 → h2 → h3）で構成する
- 1 ページに `h1` は 1 つのみ

**フォーカスの可視性（2.4.7）:**
- フォーカスリングを視認可能に保つ（ブラウザデフォルトを削除しない）

---

## 4. 理解可能性（Understandable）

### 4.1 読みやすさ（3.1）

- HTML の `lang` 属性で言語を指定する（`<html lang="ja">`）
- 専門用語・略語には初出時に説明を付ける

### 4.2 予測可能（3.2）

- フォーカスを受けるだけでコンテキストが変化しない
- 入力するだけでフォームが自動送信されない

### 4.3 入力支援（3.3）

**エラーの特定（3.3.1）:**
- 入力エラーを自動的に検出し、テキストで説明する

**ラベルまたは説明（3.3.2）:**
- 入力が必要なフォーム要素にはラベルまたは説明を付ける

**エラーの修正提案（3.3.3）:**
- エラー内容に加え、修正方法を提案する
- 例: 「メールアドレス形式が正しくありません（例: user@example.com）」

---

## 5. 堅牢性（Robust）

### 5.1 互換性（4.1）

**HTML の妥当性（4.1.1）:**
- 有効な HTML マークアップを使用する
- 重複 ID の禁止

**名前・役割・値（4.1.2）:**
- カスタムコンポーネントに適切な ARIA ロール・プロパティ・状態を設定する

**状態メッセージ（4.1.3）:**
- ステータスメッセージ（成功・エラー等）を `role="status"` または `role="alert"` で通知する

---

## 6. ARIA 実装ガイドライン

```jsx
// ライブリージョン（動的更新の通知）
<div role="status" aria-live="polite">
  {successMessage}
</div>

<div role="alert" aria-live="assertive">
  {errorMessage}
</div>

// 展開・折りたたみ
<button
  aria-expanded={isOpen}
  aria-controls="dropdown-menu"
>
  メニュー
</button>
<ul id="dropdown-menu" hidden={!isOpen}>...</ul>

// 進捗バー
<div
  role="progressbar"
  aria-valuenow={progress}
  aria-valuemin={0}
  aria-valuemax={100}
  aria-label="バックアップ進捗"
>
  {progress}%
</div>
```

---

## 更新履歴

| 日付 | バージョン | 更新者 | 内容 |
|------|-----------|--------|------|
| 2026-02-25 | 1.0.0 | システム管理者 | 初版作成 |
