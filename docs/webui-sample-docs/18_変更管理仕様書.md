# 変更管理仕様書

**プロジェクト名:** バックアップ管理システム WebUI
**バージョン:** 1.0.0
**作成日:** 2026-02-25

---

## 1. 変更管理の目的

本書は、バックアップ管理システム WebUI に対する変更を計画的かつ安全に管理し、変更による障害やサービス中断を最小限に抑えることを目的とします。

---

## 2. 変更の分類

### 2.1 変更カテゴリ

| カテゴリ | 説明 | 例 |
|---------|------|-----|
| 標準変更（Standard） | 事前承認済みの低リスク変更 | セキュリティパッチの適用・設定変更 |
| 通常変更（Normal） | 変更委員会（CAB）の承認が必要 | 機能追加・大規模改修 |
| 緊急変更（Emergency） | 重大障害への緊急対応 | P1 障害の緊急パッチ |

### 2.2 リスクレベル

| リスク | 基準 |
|--------|------|
| Low | ロールバック容易・影響範囲が限定的 |
| Medium | ロールバック可能・一部機能への影響あり |
| High | ロールバック困難・サービス全体への影響 |
| Critical | データ消失・長期停止のリスクあり |

---

## 3. 変更管理プロセス

### 3.1 通常変更フロー

```
1. 変更申請（Change Request 作成）
   - 変更概要・目的
   - 影響範囲
   - リスク評価
   - ロールバック計画
   - テスト計画
   ↓
2. 技術レビュー
   - 開発チームによる設計・実装レビュー
   - セキュリティレビュー（High/Critical の場合）
   ↓
3. CAB 承認
   - IT 管理者・セキュリティ担当・業務担当
   ↓
4. テスト実行
   - Staging 環境での確認
   - E2E テスト実行
   ↓
5. 本番適用
   - メンテナンスウィンドウ内で実施
   - 担当者立ち会い
   ↓
6. 事後確認
   - ヘルスチェック
   - 機能確認
   - 監視 30 分継続
   ↓
7. クローズ
```

### 3.2 メンテナンスウィンドウ

| 変更種別 | 実施可能時間帯 |
|---------|-------------|
| 通常変更（Low / Medium） | 平日 21:00〜翌 6:00 |
| 通常変更（High） | 土日 0:00〜6:00 |
| 緊急変更（Critical） | 随時（担当者承認後） |

---

## 4. バージョン管理

### 4.1 セマンティックバージョニング

`MAJOR.MINOR.PATCH`

| タイプ | 例 | 説明 |
|--------|-----|------|
| MAJOR | 2.0.0 | 後方互換性のない変更 |
| MINOR | 1.1.0 | 後方互換性のある機能追加 |
| PATCH | 1.0.1 | バグ修正・セキュリティパッチ |

### 4.2 ブランチ戦略（Git Flow）

```
main           ← 本番リリース専用（タグ付き）
  └─ develop   ← 統合ブランチ
       ├─ feature/JIRA-XXX  ← 機能開発
       ├─ bugfix/JIRA-XXX   ← バグ修正
       └─ hotfix/JIRA-XXX   ← 緊急修正（main から分岐）
```

**コミットメッセージ規則（Conventional Commits）:**
```
feat: ジョブ一覧にバッチ削除機能を追加
fix: ダッシュボードの更新タイマーが停止する問題を修正
docs: API仕様書のエンドポイント説明を更新
security: パスワードバリデーション強化
chore: 依存関係をアップデート
```

---

## 5. API バージョン管理

### 5.1 バージョニング方針

- URL パスベースのバージョニング（例: `/api/v1/`、`/api/v2/`）
- 新バージョンリリース後、旧バージョンを 6 ヶ月間サポート
- 廃止予定の API は `Deprecation-Date` レスポンスヘッダーで通知

### 5.2 破壊的変更の処理

| 変更種別 | 対応 |
|---------|------|
| フィールドの追加 | 後方互換性あり → そのまま追加 |
| フィールドの削除 | 破壊的変更 → 新バージョンへ |
| フィールド名の変更 | 破壊的変更 → 新旧両方をサポートする移行期間を設ける |
| レスポンス構造の変更 | 破壊的変更 → 新バージョンへ |

---

## 6. 変更ログ（CHANGELOG）

**CHANGELOG.md 形式:**
```markdown
# Changelog

## [Unreleased]

## [1.1.0] - 2026-03-01
### Added
- ジョブのバッチ削除機能
- ダークモード対応

### Changed
- ダッシュボードのリアルタイム更新間隔を 30 秒から 15 秒に短縮

### Fixed
- ジョブ作成ウィザードで戻るボタンを押すと入力が失われる問題

## [1.0.0] - 2026-02-25
### Added
- 初回リリース
```

---

## 7. 変更申請テンプレート

```markdown
## 変更申請書

**申請 ID:** CR-YYYY-NNN
**申請日:** YYYY-MM-DD
**申請者:** 氏名 / 部署
**対象環境:** Staging / Production
**変更予定日:** YYYY-MM-DD HH:MM

### 変更概要
（何を変更するか）

### 変更理由・目的
（なぜ変更するか）

### 変更内容
（具体的な変更内容）

### 影響範囲
（影響を受けるシステム・ユーザー）

### リスク評価
- リスクレベル: Low / Medium / High / Critical
- リスク内容:
- 軽減策:

### テスト計画
（Staging 環境での確認事項）

### ロールバック計画
（問題発生時の切り戻し手順）

### 作業手順
1.
2.
3.

### 完了確認項目
- [ ] ヘルスチェック確認
- [ ] 主要機能確認
- [ ] 監視 30 分継続
```

---

## 更新履歴

| 日付 | バージョン | 更新者 | 内容 |
|------|-----------|--------|------|
| 2026-02-25 | 1.0.0 | システム管理者 | 初版作成 |
