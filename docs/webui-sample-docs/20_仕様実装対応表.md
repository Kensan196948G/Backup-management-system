# 仕様-画面-実装対応表（WebUIサンプル正式化準備）

## 1. 目的

本書は `docs/webui-sample-docs` の仕様群と `webui-sample/` の実装を突合し、以下を明確化するための対応表です。

- 実装済み（UI表現として成立）
- モックのみ（UI動作はあるが API/永続化未接続）
- 未実装（仕様はあるが UI に未反映）

正式WebUI化に向けた優先順位付け（API接続、モジュール分割、品質基盤化）の土台として利用します。

## 2. 判定基準（本書での状態定義）

| 状態 | 定義 |
|---|---|
| 実装済み | `webui-sample` 上で画面/部品が表示され、最低限のUI操作が成立している |
| モックのみ | UI操作は成立するが、`state` のメモリ更新であり API/DB/認証基盤と未接続 |
| 未実装 | 仕様書に記載はあるが、`webui-sample` 上に画面・機能・導線がない |

注記:
- 現状 `webui-sample/app.js` は単一ファイル内のモック状態管理（`state`）を中心に構成されています。
- よって CRUD/認証/通知/レポート出力の多くは「モックのみ」判定になります。

## 3. 対応表（画面単位）

| 画面ID | 画面名 | 仕様書参照 | 実装箇所 | 状態 | 備考 |
|---|---|---|---|---|---|
| SCR-001 | ログイン画面（パネル） | `docs/webui-sample-docs/04_画面設計書.md`（SCR-001）, `docs/webui-sample-docs/09_認証・認可設計書.md`（2.1-2.4） | `webui-sample/index.html:56`, `webui-sample/app.js:771` | モックのみ | ログインUI・JWT表示モックあり。実認証/ロック/MFA/refresh未接続 |
| SCR-002 | ダッシュボード | `docs/webui-sample-docs/04_画面設計書.md`（SCR-002）, `docs/webui-sample-docs/02_機能仕様書.md`（2.1, 2.2） | `webui-sample/index.html:79`, `webui-sample/app.js:250` | モックのみ | サマリー/チャート/アラート/予定/履歴は表示可能。`simulateTick` による疑似更新 |
| SCR-003 | ジョブ一覧 | `docs/webui-sample-docs/04_画面設計書.md`（SCR-003）, `docs/webui-sample-docs/02_機能仕様書.md`（3.1, 3.3） | `webui-sample/index.html:117`, `webui-sample/app.js:293`, `webui-sample/app.js:316` | モックのみ | フィルタ・一覧・詳細・選択は動作。API/DB未接続 |
| SCR-005 | ジョブ作成（フォーム） | `docs/webui-sample-docs/04_画面設計書.md`（SCR-005）, `docs/webui-sample-docs/02_機能仕様書.md`（3.2） | `webui-sample/index.html:143`, `webui-sample/app.js:340`, `webui-sample/app.js:386` | モックのみ | 作成/編集UIあり。仕様上の「ウィザード」は未実装（単一フォーム） |
| SCR-004* | オフラインメディア管理（画面設計書明記なし/サンプル拡張） | `docs/webui-sample-docs/02_機能仕様書.md`（関連は監視/運用）, `docs/webui-sample-docs/05_コンポーネント仕様書.md` | `webui-sample/index.html:168`, `webui-sample/app.js:575` | モックのみ | 一覧・登録・貸出返却・QRプレビュー・ロケーションピッカーあり |
| SCR-006* | 検証テスト管理（画面設計書未定義/サンプル拡張） | `docs/webui-sample-docs/02_機能仕様書.md`（関連要件）, `docs/webui-sample-docs/11_テスト仕様書.md`（E2E観点） | `webui-sample/index.html:228`, `webui-sample/app.js:655` | モックのみ | 履歴/スケジュール/課題表示。追加処理はメモリ更新 |
| SCR-007* | レポート管理 | `docs/webui-sample-docs/02_機能仕様書.md`（5.1, 5.2）, `docs/webui-sample-docs/07_API仕様書.md`（レポート関連）, `docs/webui-sample-docs/04_画面設計書.md`（画面詳細未整備） | `webui-sample/index.html:242`, `webui-sample/app.js:688` | モックのみ | 生成/一覧/詳細/削除UIあり。ダウンロード/生成はモック |
| SCR-008* | 通知管理/テスト送信 | `docs/webui-sample-docs/02_機能仕様書.md`（4.1, 4.2）, `docs/webui-sample-docs/14_エラーハンドリング仕様書.md`（通知失敗対応観点） | `webui-sample/index.html:268`, `webui-sample/app.js:731` | モックのみ | Dashboard/Email/Teams 表示とテスト送信UI。実チャネル接続なし |
| SCR-009* | 監視・性能 | `docs/webui-sample-docs/12_パフォーマンス要件書.md`, `docs/webui-sample-docs/14_エラーハンドリング仕様書.md` | `webui-sample/index.html:294`, `webui-sample/app.js:736` | モックのみ | 性能表/エラー統計/エラー文脈表示あり。実メトリクス収集なし |
| SCR-010* | 監査ログ | `docs/webui-sample-docs/07_API仕様書.md`（共通監査観点）, `docs/webui-sample-docs/09_認証・認可設計書.md`（監査連携観点） | `webui-sample/index.html:309`, `webui-sample/app.js:745` | モックのみ | 検索/フィルタUIあり。実監査ログ連携なし |
| SCR-011* | APIリファレンス/サンプル表示 | `docs/webui-sample-docs/07_API仕様書.md` | `webui-sample/index.html:319`, `webui-sample/app.js:753` | 実装済み | 仕様抜粋表示UIとして成立（開発者向け補助画面）。API実行機能はなし |

\* `SCR-004` 以降は `04_画面設計書.md` に明示IDがないため、本対応表で暫定採番。

## 4. 対応表（機能単位）

### 4.1 共通ナビゲーション / レイアウト / 基本UI

| 機能ID | 機能 | 仕様書参照 | 実装箇所 | 状態 | 備考 |
|---|---|---|---|---|---|
| COM-001 | サイドバー导航/画面切替 | `docs/webui-sample-docs/05_コンポーネント仕様書.md`（4.1 Sidebar）, `docs/webui-sample-docs/03_UI_UX設計書.md`（6. ナビゲーション設計） | `webui-sample/index.html:18`, `webui-sample/app.js:229`, `webui-sample/app.js:231` | 実装済み | `data-view` + `setView()` で切替 |
| COM-002 | トップバー操作（状態更新/アラートベル/再ログイン） | `docs/webui-sample-docs/05_コンポーネント仕様書.md`（4.2 PageHeader） | `webui-sample/index.html:44`, `webui-sample/app.js:194`-`201` | モックのみ | 操作はUI反応するが業務API未接続 |
| COM-003 | トースト通知 | `docs/webui-sample-docs/04_画面設計書.md`（4.2 トースト通知）, `docs/webui-sample-docs/05_コンポーネント仕様書.md`（3.4 Toast 通知） | `webui-sample/index.html:337`, `webui-sample/app.js:887` | 実装済み | 表示コンポーネントとしては成立。中央集権エラーハンドラ未実装 |
| COM-004 | ステータスバッジ/結果バッジ | `docs/webui-sample-docs/05_コンポーネント仕様書.md`（2.2 Badge） | `webui-sample/styles.css:267`, `webui-sample/app.js:877`-`880` | 実装済み | 共通化候補（今後 `ui-common.js` へ抽出） |
| COM-005 | レスポンシブ対応 | `docs/webui-sample-docs/03_UI_UX設計書.md`（4.2 レイアウトグリッド）, `docs/webui-sample-docs/13_アクセシビリティ仕様書.md`（2.3, 3.4） | `webui-sample/styles.css:468`, `webui-sample/styles.css:476` | 実装済み | 主要ブレークポイントあり。実機検証基準は未整備 |

### 4.2 認証・認可（UI表現）

| 機能ID | 機能 | 仕様書参照 | 実装箇所 | 状態 | 備考 |
|---|---|---|---|---|---|
| AUTH-001 | ログインフォーム表示/送信 | `docs/webui-sample-docs/09_認証・認可設計書.md`（2.1） | `webui-sample/index.html:63`, `webui-sample/app.js:771` | モックのみ | 成功固定。認証失敗パターン未実装 |
| AUTH-002 | JWTレスポンス表示（モック） | `docs/webui-sample-docs/09_認証・認可設計書.md`（1.1, 2.1） | `webui-sample/app.js:775`-`781` | モックのみ | `eyJ...mock` 表示のみ |
| AUTH-003 | RBACによるUI制御（operator/adminのみ操作可） | `docs/webui-sample-docs/09_認証・認可設計書.md`（4.1, 4.2） | `webui-sample/index.html:31`, `webui-sample/app.js:784`-`786` | モックのみ | UIボタン無効化のみ。サーバー強制なし |
| AUTH-004 | アカウントロック/MFA/Silent Refresh | `docs/webui-sample-docs/09_認証・認可設計書.md`（2.3, 3, 6） | なし | 未実装 | 画面/状態遷移とも未対応 |

### 4.3 ダッシュボード / 監視・アラート

| 機能ID | 機能 | 仕様書参照 | 実装箇所 | 状態 | 備考 |
|---|---|---|---|---|---|
| DSH-001 | サマリーカード表示 | `docs/webui-sample-docs/02_機能仕様書.md`（2.1）, `docs/webui-sample-docs/05_コンポーネント仕様書.md`（3.2 StatCard） | `webui-sample/index.html:80`, `webui-sample/app.js:250`-`258` | モックのみ | `state.dashboard.summary` 依存 |
| DSH-002 | チャート表示（ドーナツ/折線/棒） | `docs/webui-sample-docs/02_機能仕様書.md`（2.1, 2.2） | `webui-sample/index.html:83`, `webui-sample/app.js:260`-`270`, `webui-sample/app.js:807`-`851` | モックのみ | Canvas独自描画。実データ連携なし |
| DSH-003 | 未確認アラート一覧/個別確認/一括確認 | `docs/webui-sample-docs/02_機能仕様書.md`（4.2） | `webui-sample/index.html:90`, `webui-sample/app.js:272`-`285`, `webui-sample/app.js:201`-`206` | モックのみ | 永続化/通知チャネル同期なし |
| DSH-004 | ライブ更新（自動/手動シミュレーション） | `docs/webui-sample-docs/02_機能仕様書.md`（4.1 リアルタイム監視）, `docs/webui-sample-docs/12_パフォーマンス要件書.md` | `webui-sample/index.html:34`, `webui-sample/index.html:50`, `webui-sample/app.js:181`, `webui-sample/app.js:791` | モックのみ | ポーリング/WS未実装。疑似データ変動のみ |

### 4.4 ジョブ管理

| 機能ID | 機能 | 仕様書参照 | 実装箇所 | 状態 | 備考 |
|---|---|---|---|---|---|
| JOB-001 | ジョブ一覧表示/検索/フィルタ | `docs/webui-sample-docs/02_機能仕様書.md`（3.1） | `webui-sample/index.html:118`, `webui-sample/app.js:293`-`314` | モックのみ | クライアント内フィルタ |
| JOB-002 | ジョブ詳細表示（基本/準拠/コピー/履歴） | `docs/webui-sample-docs/02_機能仕様書.md`（3.3） | `webui-sample/index.html:134`, `webui-sample/app.js:316`-`338` | モックのみ | タブレス詳細パネルとして実装 |
| JOB-003 | ジョブ作成/編集 | `docs/webui-sample-docs/02_機能仕様書.md`（3.2）, `docs/webui-sample-docs/14_エラーハンドリング仕様書.md`（3.2） | `webui-sample/index.html:143`, `webui-sample/app.js:340`-`416` | モックのみ | バリデーション簡易実装。API/サーバ検証なし |
| JOB-004 | 準拠再計算（3-2-1-1-0） | `docs/webui-sample-docs/07_API仕様書.md`（5. ダッシュボードAPI/準拠関連）, `docs/webui-sample-docs/02_機能仕様書.md`（3.3） | `webui-sample/index.html:127`, `webui-sample/app.js:426`-`435` | モックのみ | ルール評価ロジック簡略 |
| JOB-005 | ジョブ削除確認ダイアログ | `docs/webui-sample-docs/04_画面設計書.md`（4.1 削除確認ダイアログ） | なし | 未実装 | 削除機能・確認ダイアログとも未実装 |
| JOB-006 | ジョブ作成ウィザード（段階入力） | `docs/webui-sample-docs/04_画面設計書.md`（SCR-005）, `docs/webui-sample-docs/02_機能仕様書.md`（3.2 ジョブ作成ウィザード） | なし（単一フォームで代替） | 未実装 | 正式化時に再設計要 |

### 4.5 オフラインメディア管理

| 機能ID | 機能 | 仕様書参照 | 実装箇所 | 状態 | 備考 |
|---|---|---|---|---|---|
| MED-001 | メディア一覧/選択 | `docs/webui-sample-docs/05_コンポーネント仕様書.md`（3.1 DataTable） | `webui-sample/index.html:172`, `webui-sample/app.js:575`-`586` | モックのみ | 選択でフォーム反映 |
| MED-002 | メディア登録/更新フォーム | （画面仕様未詳細、サンプル拡張） | `webui-sample/index.html:182`, `webui-sample/app.js:602`-`618` | モックのみ | 容量/場所/種別UIは豊富 |
| MED-003 | 貸出/返却処理 | （運用仕様関連）, `docs/webui-sample-docs/14_エラーハンドリング仕様書.md`（リソースエラー） | `webui-sample/index.html:213`, `webui-sample/app.js:620`-`639` | モックのみ | `RESOURCE_NOT_FOUND` 等の文言のみ |
| MED-004 | QRプレビュー/印刷 | `docs/webui-sample-docs/05_コンポーネント仕様書.md`（複合UI観点） | `webui-sample/index.html:215`, `webui-sample/app.js:512`, `webui-sample/app.js:854`-`873` | モックのみ | 疑似QR描画。実QR生成/ダウンロード未実装 |

### 4.6 検証・レポート・通知・監査

| 機能ID | 機能 | 仕様書参照 | 実装箇所 | 状態 | 備考 |
|---|---|---|---|---|---|
| VER-001 | 検証テスト履歴表示/追加 | `docs/webui-sample-docs/11_テスト仕様書.md`（4. E2E 観点）, `docs/webui-sample-docs/02_機能仕様書.md`（運用機能関連） | `webui-sample/index.html:230`, `webui-sample/app.js:641`-`647`, `webui-sample/app.js:655`-`666` | モックのみ | 実行API・結果保存未実装 |
| VER-002 | 検証スケジュール作成/表示 | 同上 | `webui-sample/index.html:235`, `webui-sample/app.js:648`-`653`, `webui-sample/app.js:655`-`666` | モックのみ | スケジューラ未接続 |
| RPT-001 | レポート生成UI/一覧/詳細 | `docs/webui-sample-docs/02_機能仕様書.md`（5.1, 5.2）, `docs/webui-sample-docs/07_API仕様書.md`（レポート系） | `webui-sample/index.html:244`, `webui-sample/app.js:668`-`709` | モックのみ | 生成/削除は state 更新。出力実ファイルなし |
| NTF-001 | 通知テスト送信/履歴 | `docs/webui-sample-docs/02_機能仕様書.md`（4.1, 4.2） | `webui-sample/index.html:270`, `webui-sample/app.js:711`-`734` | モックのみ | Email/Teams/Dashboard 実接続なし |
| MON-001 | API性能・エラー統計表示 | `docs/webui-sample-docs/12_パフォーマンス要件書.md`, `docs/webui-sample-docs/14_エラーハンドリング仕様書.md` | `webui-sample/index.html:296`, `webui-sample/app.js:736`-`743` | モックのみ | 指標表示のみ |
| AUD-001 | 監査ログ検索/フィルタ表示 | `docs/webui-sample-docs/09_認証・認可設計書.md`（監査関連観点）, `docs/webui-sample-docs/14_エラーハンドリング仕様書.md`（ログ） | `webui-sample/index.html:311`, `webui-sample/app.js:744`-`750` | モックのみ | 実監査イベント蓄積は一部UI内ログのみ |
| API-001 | API仕様サンプル表示/循環表示 | `docs/webui-sample-docs/07_API仕様書.md` | `webui-sample/index.html:321`, `webui-sample/app.js:752`-`769` | 実装済み | 仕様参照ビューとして有用（呼び出し機能は未実装） |

## 5. 仕様書との主な差分（初版）

### 5.1 サンプルUI側で先行している点（仕様書より実装が広い/細かい）

- オフラインメディア管理画面の UI 密度（容量スライダー、ロケーションピッカー、QRプレビュー）
- 通知/監査/API参照の統合管理画面
- 監視・性能画面のダッシュボード統合表示

### 5.2 仕様書側にあり、サンプルUIでは未実装の点（優先候補）

- 実認証フロー（ロック、MFA、リフレッシュ、ログアウト処理）
- ジョブ作成ウィザード（段階入力）
- 削除確認ダイアログと削除処理
- API/DB/通知チャネルとの実接続
- エラーハンドリング基盤（インターセプタ、エラーバウンダリ、404/500）

## 6. 次作業への引き継ぎ（第1段階 Step 2 への入力）

`app.js` 分割時の最小モジュール候補:

- `webui-sample/js/main.js`（起動・初期化）
- `webui-sample/js/state.js`（モック状態）
- `webui-sample/js/ui-common.js`（toast, esc, chips, 共通描画）
- `webui-sample/js/views/dashboard.js`
- `webui-sample/js/views/jobs.js`
- `webui-sample/js/views/media.js`
- `webui-sample/js/views/verification.js`
- `webui-sample/js/views/reports.js`
- `webui-sample/js/views/notifications.js`
- `webui-sample/js/views/monitoring.js`
- `webui-sample/js/views/audit.js`
- `webui-sample/js/views/api.js`
- `webui-sample/js/auth.js`（ログイン/RBAC）

## 7. 更新履歴

| 日付 | バージョン | 更新者 | 内容 |
|---|---|---|---|
| 2026-02-25 | 0.1.0 | Codex | 初版作成（仕様-画面-実装の突合、状態判定、ギャップ整理） |

