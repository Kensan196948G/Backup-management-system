# コンポーネント仕様書

**プロジェクト名:** バックアップ管理システム WebUI
**バージョン:** 1.0.0
**作成日:** 2026-02-25

---

## 1. 概要

本書は、WebUI で使用する再利用可能な UI コンポーネントの仕様を定義します。
コンポーネントライブラリは React 18 + TypeScript で実装し、Storybook でカタログ化します。

---

## 2. 基本コンポーネント（Atoms）

### 2.1 Button

**Props 定義:**

| Prop | 型 | 必須 | デフォルト | 説明 |
|------|----|------|----------|------|
| variant | `'primary' \| 'secondary' \| 'ghost' \| 'danger'` | - | `'primary'` | ボタン種別 |
| size | `'sm' \| 'md' \| 'lg'` | - | `'md'` | サイズ |
| disabled | `boolean` | - | `false` | 無効状態 |
| loading | `boolean` | - | `false` | ローディング状態 |
| icon | `ReactNode` | - | - | 左アイコン |
| iconRight | `ReactNode` | - | - | 右アイコン |
| onClick | `() => void` | - | - | クリックハンドラ |
| type | `'button' \| 'submit' \| 'reset'` | - | `'button'` | HTML type |
| fullWidth | `boolean` | - | `false` | 100% 幅 |

**サイズ仕様:**

| サイズ | 高さ | 水平パディング | フォントサイズ |
|--------|------|-------------|-------------|
| sm | 32px | 12px | 13px |
| md | 40px | 16px | 14px |
| lg | 48px | 24px | 16px |

**使用例:**
```tsx
<Button variant="primary" size="md" loading={isSubmitting}>
  ジョブを作成
</Button>
```

---

### 2.2 Badge（ステータスバッジ）

**Props 定義:**

| Prop | 型 | 説明 |
|------|----|------|
| status | `'success' \| 'error' \| 'warning' \| 'running' \| 'disabled' \| 'pending'` | ステータス |
| label | `string` | 表示テキスト |
| dot | `boolean` | ドットインジケーター付き |

**ステータス別スタイル:**

| status | 背景色 | テキスト色 | ドット色 | ラベル（日本語） |
|--------|-------|----------|---------|--------------|
| success | `#DCFCE7` | `#166534` | `#16A34A` | 成功 |
| error | `#FEE2E2` | `#991B1B` | `#DC2626` | 失敗 |
| warning | `#FEF3C7` | `#92400E` | `#D97706` | 警告 |
| running | `#DBEAFE` | `#1E40AF` | `#2563EB` | 実行中 |
| disabled | `#F3F4F6` | `#6B7280` | `#9CA3AF` | 無効 |
| pending | `#F5F3FF` | `#5B21B6` | `#7C3AED` | 待機中 |

---

### 2.3 Input

**Props 定義:**

| Prop | 型 | 説明 |
|------|----|------|
| label | `string` | ラベルテキスト |
| placeholder | `string` | プレースホルダー |
| error | `string` | エラーメッセージ |
| hint | `string` | ヒントテキスト |
| required | `boolean` | 必須マーク表示 |
| disabled | `boolean` | 無効状態 |
| leftIcon | `ReactNode` | 左アイコン |
| rightIcon | `ReactNode` | 右アイコン |

**状態スタイル:**

| 状態 | ボーダー色 | 説明 |
|------|----------|------|
| Default | `#D1D5DB` | 通常 |
| Focus | `#1E40AF` | フォーカス中（2px リング） |
| Error | `#DC2626` | エラー時 |
| Disabled | `#E5E7EB` | 無効時（背景: `#F9FAFB`） |

---

### 2.4 Select

- ネイティブ `<select>` の代替カスタムコンポーネント
- キーボード操作（矢印キー / Enter / Esc）対応
- 検索フィルタリング機能（オプション数 10 以上の場合）
- 複数選択モード（`multiple` prop）

---

### 2.5 Checkbox / Radio / Toggle

**Toggle Props:**

| Prop | 型 | 説明 |
|------|----|------|
| checked | `boolean` | 状態 |
| onChange | `(checked: boolean) => void` | 変更ハンドラ |
| label | `string` | ラベル |
| size | `'sm' \| 'md'` | サイズ |

---

## 3. 複合コンポーネント（Molecules）

### 3.1 DataTable

**Props 定義:**

| Prop | 型 | 説明 |
|------|----|------|
| columns | `ColumnDef[]` | カラム定義 |
| data | `T[]` | データ配列 |
| loading | `boolean` | ローディング状態 |
| pagination | `PaginationConfig` | ページネーション設定 |
| selectable | `boolean` | 行選択機能 |
| onRowClick | `(row: T) => void` | 行クリックハンドラ |
| emptyMessage | `string` | 空状態メッセージ |

**ColumnDef 型:**
```typescript
interface ColumnDef<T> {
  id: string;
  header: string;
  accessor: keyof T | ((row: T) => ReactNode);
  sortable?: boolean;
  width?: number | string;
  align?: 'left' | 'center' | 'right';
  cell?: (value: any, row: T) => ReactNode;
}
```

### 3.2 StatCard（サマリーカード）

**Props:**
- `title`: カードタイトル
- `value`: 主要数値
- `unit`: 単位テキスト
- `trend`: `{ value: number; direction: 'up' | 'down'; period: string }`
- `icon`: アイコン
- `color`: カードアクセントカラー
- `onClick`: クリックハンドラ

### 3.3 ProgressBar

**Props:**
- `value`: 0〜100 の数値
- `max`: 最大値（デフォルト 100）
- `color`: バーカラー（`'primary' | 'success' | 'warning' | 'error'`）
- `showLabel`: パーセンテージ表示
- `animated`: アニメーション（実行中の場合）
- `size`: `'sm' | 'md' | 'lg'`

### 3.4 Toast 通知

**Props:**
- `type`: `'success' | 'error' | 'warning' | 'info'`
- `title`: タイトル
- `message`: メッセージ
- `duration`: 表示時間（ms、0 で手動解除のみ）
- `action`: `{ label: string; onClick: () => void }` オプションアクション

**Toast API（命令型）:**
```typescript
toast.success('ジョブの実行を開始しました');
toast.error('ジョブの実行に失敗しました', { duration: 0 });
toast.warning('ストレージ残量が少なくなっています');
```

---

## 4. レイアウトコンポーネント（Organisms）

### 4.1 Sidebar

**Props:**
- `collapsed`: `boolean` 折りたたみ状態
- `onCollapse`: `(collapsed: boolean) => void`
- `navItems`: `NavItem[]` ナビゲーション項目

**NavItem 型:**
```typescript
interface NavItem {
  id: string;
  label: string;
  icon: ReactNode;
  path: string;
  badge?: number;
  children?: NavItem[];
}
```

### 4.2 PageHeader

**Props:**
- `title`: ページタイトル
- `breadcrumbs`: `BreadcrumbItem[]`
- `actions`: `ReactNode`（右側アクションボタン群）
- `tabs`: `TabItem[]`（オプション）

### 4.3 Modal / Dialog

**Props:**
- `open`: `boolean`
- `onClose`: `() => void`
- `title`: タイトル
- `size`: `'sm' | 'md' | 'lg' | 'xl' | 'fullscreen'`
- `footer`: `ReactNode`（カスタムフッター）
- `closeOnBackdrop`: `boolean`（背景クリックで閉じる）

**サイズ仕様:**

| size | 最大幅 |
|------|--------|
| sm | 400px |
| md | 560px |
| lg | 720px |
| xl | 900px |
| fullscreen | 100vw |

---

## 5. コンポーネントライブラリ構成

```
src/
├── components/
│   ├── atoms/
│   │   ├── Button/
│   │   ├── Badge/
│   │   ├── Input/
│   │   ├── Select/
│   │   ├── Checkbox/
│   │   ├── Toggle/
│   │   └── Spinner/
│   ├── molecules/
│   │   ├── DataTable/
│   │   ├── StatCard/
│   │   ├── ProgressBar/
│   │   ├── SearchInput/
│   │   ├── DateRangePicker/
│   │   └── Toast/
│   ├── organisms/
│   │   ├── Sidebar/
│   │   ├── TopBar/
│   │   ├── PageHeader/
│   │   ├── Modal/
│   │   └── JobTimeline/
│   └── templates/
│       ├── AuthLayout/
│       └── DashboardLayout/
```

---

## 更新履歴

| 日付 | バージョン | 更新者 | 内容 |
|------|-----------|--------|------|
| 2026-02-25 | 1.0.0 | システム管理者 | 初版作成 |
