# Claude Code è‡ªå‹•ä¿®å¾©ãƒ«ãƒ¼ãƒ—ã‚·ã‚¹ãƒ†ãƒ  - ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

## ðŸš€ ã¯ã˜ã‚ã«

ã“ã®ã‚¬ã‚¤ãƒ‰ã§ã¯ã€Claude Code è‡ªå‹•ä¿®å¾©ãƒ«ãƒ¼ãƒ—ã‚·ã‚¹ãƒ†ãƒ ã®æœ€é€Ÿã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ–¹æ³•ã‚’èª¬æ˜Žã—ã¾ã™ã€‚

**æ‰€è¦æ™‚é–“**: ç´„5åˆ†

---

## âœ… å‰ææ¡ä»¶

ä»¥ä¸‹ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼š

```bash
# Git
git --version  # 2.xä»¥é™

# jqï¼ˆJSONå‡¦ç†ãƒ„ãƒ¼ãƒ«ï¼‰
jq --version   # 1.5ä»¥é™

# Pythonï¼ˆCIç”¨ï¼‰
python3 --version  # 3.11ä»¥é™

# Claude Codeï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ç”¨ï¼‰
# https://claude.com/claude-code
```

### jqã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
# macOS
brew install jq

# Ubuntu/Debian
sudo apt-get install jq

# Windows (WSL)
sudo apt-get install jq
```

---

## ðŸ“¦ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ï¼ˆ3ã‚¹ãƒ†ãƒƒãƒ—ï¼‰

### ã‚¹ãƒ†ãƒƒãƒ—1: ãƒ•ã‚¡ã‚¤ãƒ«ç¢ºèª

ã™ã¹ã¦ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒé…ç½®ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªï¼š

```bash
# å¿…é ˆãƒ•ã‚¡ã‚¤ãƒ«ã®ç¢ºèª
ls -la CLAUDE.md
ls -la .claude/commands/review-all.md
ls -la .claude/commands/auto-fix.md
ls -la .claude/settings.json
ls -la scripts/local-auto-repair.sh
ls -la state.json
ls -la .github/workflows/claude-auto-repair-loop.yml

# ã™ã¹ã¦å­˜åœ¨ã™ã‚Œã°OK âœ…
```

### ã‚¹ãƒ†ãƒƒãƒ—2: ã‚¹ã‚¯ãƒªãƒ—ãƒˆå®Ÿè¡Œæ¨©é™ã®ä»˜ä¸Ž

```bash
chmod +x scripts/local-auto-repair.sh
```

### ã‚¹ãƒ†ãƒƒãƒ—3: å‹•ä½œç¢ºèª

```bash
# æ§‹æ–‡ãƒã‚§ãƒƒã‚¯
bash -n scripts/local-auto-repair.sh
# ã‚¨ãƒ©ãƒ¼ãŒãªã‘ã‚Œã°OK âœ…

# state.json ã®åˆæœŸåŒ–ç¢ºèª
cat state.json
# JSONå½¢å¼ã§è¡¨ç¤ºã•ã‚Œã‚Œã°OK âœ…
```

---

## ðŸŽ¯ ä½¿ç”¨æ–¹æ³•

### ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºæ™‚ï¼ˆClaude Codeï¼‰

#### è‡ªå‹•å®Ÿè¡Œ

Claude Codeã® **Stop ãƒœã‚¿ãƒ³** ã‚’æŠ¼ã™ã¨è‡ªå‹•çš„ã«å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚

```
1. ã‚³ãƒ¼ãƒ‰ã‚’å¤‰æ›´
2. Claude Codeã§ä½œæ¥­
3. "Stop" ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
   â†“
è‡ªå‹•çš„ã«ãƒ¬ãƒ“ãƒ¥ãƒ¼ â†’ ä¿®å¾© â†’ å†ãƒ¬ãƒ“ãƒ¥ãƒ¼ ãŒå®Ÿè¡Œã•ã‚Œã‚‹
```

#### æ‰‹å‹•å®Ÿè¡Œ

```bash
# ç›´æŽ¥ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œ
bash scripts/local-auto-repair.sh

# ã¾ãŸã¯
./scripts/local-auto-repair.sh
```

#### ã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒžãƒ³ãƒ‰å®Ÿè¡Œ

Claude Codeå†…ã§ä»¥ä¸‹ã®ã‚³ãƒžãƒ³ãƒ‰ã‚’ä½¿ç”¨ã§ãã¾ã™ï¼š

```
/review-all  # åŒ…æ‹¬ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®ã¿å®Ÿè¡Œ
/auto-fix    # è‡ªå‹•ä¿®å¾©ã®ã¿å®Ÿè¡Œ
```

---

### CI/CDæ™‚ï¼ˆGitHub Actionsï¼‰

#### è‡ªå‹•å®Ÿè¡Œ

ä»¥ä¸‹ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§è‡ªå‹•çš„ã«å®Ÿè¡Œã•ã‚Œã¾ã™ï¼š

- **PRä½œæˆæ™‚ãƒ»æ›´æ–°æ™‚**
- **mainãƒ–ãƒ©ãƒ³ãƒã¸ã®pushæ™‚**

ç‰¹åˆ¥ãªæ“ä½œã¯ä¸è¦ã§ã™ã€‚

#### æ‰‹å‹•å®Ÿè¡Œ

```bash
# GitHub CLIã‚’ä½¿ç”¨
gh workflow run claude-auto-repair-loop.yml

# æœ€å¤§ä¿®å¾©å›žæ•°ã‚’æŒ‡å®š
gh workflow run claude-auto-repair-loop.yml -f max_repairs=5
```

ã¾ãŸã¯ GitHub ã®UI ã‹ã‚‰ï¼š
```
Actions â†’ Claude Auto Repair Loop â†’ Run workflow
```

---

## ðŸ“Š çµæžœã®ç¢ºèª

### ãƒ­ãƒ¼ã‚«ãƒ«

```bash
# å®Ÿè¡Œãƒ­ã‚°
cat logs/auto-repair-local.log

# ãƒ¬ãƒ“ãƒ¥ãƒ¼çµæžœ
cat review-output.txt

# ä¿®å¾©çµæžœ
cat fix-output.txt

# çŠ¶æ…‹ç¢ºèª
cat state.json
```

### CI/CD

1. **PRã‚³ãƒ¡ãƒ³ãƒˆ**: è‡ªå‹•çš„ã«çµæžœãƒ¬ãƒãƒ¼ãƒˆãŒæŠ•ç¨¿ã•ã‚Œã¾ã™
2. **Actionsç”»é¢**: GitHub Actionsã®å®Ÿè¡Œãƒ­ã‚°ã‚’ç¢ºèª
3. **Artifacts**: ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰å¯èƒ½

---

## ðŸ” å‹•ä½œãƒ†ã‚¹ãƒˆ

### ãƒ†ã‚¹ãƒˆ1: ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®ã¿

```bash
# 1. ãƒ†ã‚¹ãƒˆç”¨å¤‰æ›´ã‚’ä½œæˆ
echo "# Test Change" >> README.md

# 2. ãƒ¬ãƒ“ãƒ¥ãƒ¼å®Ÿè¡Œï¼ˆClaude Codeå†…ã§ï¼‰
/review-all

# 3. çµæžœç¢ºèª
# â†’ ãƒ¬ãƒ“ãƒ¥ãƒ¼çµæžœãŒè¡¨ç¤ºã•ã‚Œã‚‹
```

### ãƒ†ã‚¹ãƒˆ2: è‡ªå‹•ä¿®å¾©

```bash
# 1. ãƒ•ã‚©ãƒ¼ãƒžãƒƒãƒˆé•åã®ã‚³ãƒ¼ãƒ‰ã‚’ä½œæˆ
cat > test_format.py <<EOF
def hello():
x=1
if x>0:
  return True
EOF

# 2. ãƒ¬ãƒ“ãƒ¥ãƒ¼å®Ÿè¡Œ
/review-all
# â†’ ãƒ•ã‚©ãƒ¼ãƒžãƒƒãƒˆå•é¡ŒãŒæ¤œå‡ºã•ã‚Œã‚‹

# 3. è‡ªå‹•ä¿®å¾©å®Ÿè¡Œ
/auto-fix

# 4. çµæžœç¢ºèª
cat test_format.py
# â†’ ãƒ•ã‚©ãƒ¼ãƒžãƒƒãƒˆãŒä¿®æ­£ã•ã‚Œã¦ã„ã‚‹
```

### ãƒ†ã‚¹ãƒˆ3: CI/CD

```bash
# 1. ãƒ–ãƒ©ãƒ³ãƒä½œæˆ
git checkout -b test/auto-repair

# 2. ãƒ†ã‚¹ãƒˆç”¨å¤‰æ›´
echo "test" > test.txt
git add test.txt
git commit -m "test: auto-repair"

# 3. ãƒ—ãƒƒã‚·ãƒ¥
git push origin test/auto-repair

# 4. PRä½œæˆ
gh pr create --base main --head test/auto-repair \
  --title "Test: Auto-repair" \
  --body "Testing auto-repair system"

# 5. GitHub Actionsã®å®Ÿè¡Œã‚’ç¢ºèª
gh pr checks

# 6. PRã‚³ãƒ¡ãƒ³ãƒˆã§ãƒ¬ãƒãƒ¼ãƒˆã‚’ç¢ºèª
```

---

## âš™ï¸ è¨­å®šã®ã‚«ã‚¹ã‚¿ãƒžã‚¤ã‚º

### æœ€å¤§ä¿®å¾©å›žæ•°ã®å¤‰æ›´

```bash
# scripts/local-auto-repair.sh ã‚’ç·¨é›†
MAX_REPAIR=3  # â† ã“ã®å€¤ã‚’å¤‰æ›´ï¼ˆæŽ¨å¥¨: 2-5ï¼‰
```

### ãƒ¬ãƒ“ãƒ¥ãƒ¼è¦³ç‚¹ã®å¤‰æ›´

```markdown
# CLAUDE.md ã‚’ç·¨é›†
## åŒ…æ‹¬ãƒ¬ãƒ“ãƒ¥ãƒ¼åŸºæº–

1. ãƒã‚°
2. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£
3. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒžãƒ³ã‚¹
4. è¨­è¨ˆæ•´åˆæ€§
5. å¯èª­æ€§
6. [è¿½åŠ ã—ãŸã„è¦³ç‚¹]  â† è¿½åŠ 
```

### è‡ªå‹•ä¿®å¾©ç¯„å›²ã®å¤‰æ›´

```markdown
# CLAUDE.md ã‚’ç·¨é›†
## è‡ªå‹•ä¿®å¾©ãƒãƒªã‚·ãƒ¼

### âœ… è‡ªå‹•ä¿®å¾©å¯èƒ½ãªé …ç›®
- [è¿½åŠ ã—ãŸã„é …ç›®]  â† è¿½åŠ 

### âŒ è‡ªå‹•ä¿®å¾©ç¦æ­¢é …ç›®
- [è¿½åŠ ã—ãŸã„é …ç›®]  â† è¿½åŠ 
```

---

## ðŸš¨ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### å•é¡Œ: jqãŒè¦‹ã¤ã‹ã‚‰ãªã„

```bash
# macOS
brew install jq

# Ubuntu/Debian
sudo apt-get install jq
```

### å•é¡Œ: ã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒå®Ÿè¡Œã§ããªã„

```bash
# å®Ÿè¡Œæ¨©é™ã‚’ä»˜ä¸Ž
chmod +x scripts/local-auto-repair.sh

# ç›´æŽ¥bashã§å®Ÿè¡Œ
bash scripts/local-auto-repair.sh
```

### å•é¡Œ: ä¿®å¾©ãŒç„¡é™ãƒ«ãƒ¼ãƒ—ã™ã‚‹

```bash
# çŠ¶æ…‹ã‚’ãƒªã‚»ãƒƒãƒˆ
cat > state.json <<EOF
{
  "repair_count": 0,
  "last_hash": "",
  "last_error": "",
  "last_review_time": "",
  "total_issues_found": 0,
  "total_issues_fixed": 0
}
EOF
```

### å•é¡Œ: GitHub ActionsãŒå¤±æ•—ã™ã‚‹

```bash
# ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãƒ­ã‚°ã‚’ç¢ºèª
gh run list
gh run view [run-id] --log-failed

# æ¨©é™ã‚’ç¢ºèª
# .github/workflows/claude-auto-repair-loop.yml
permissions:
  contents: write
  pull-requests: write
```

---

## ðŸ“š è©³ç´°ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

å®Œå…¨ãªæŠ€è¡“ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ã“ã¡ã‚‰ï¼š

- [claude-auto-repair-v3.md](docs/13_é–‹ç™ºç’°å¢ƒï¼ˆdevelopment-environmentï¼‰/claude-auto-repair-v3.md)

ä¸»è¦ãªå†…å®¹ï¼š
- å…¨ä½“ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è©³ç´°
- ãƒ¬ã‚¤ãƒ¤ãƒ¼åˆ¥è²¬å‹™åˆ†é›¢
- è‡ªå·±ä¿®å¾©ãƒ«ãƒ¼ãƒ—åˆ¶å¾¡è¨­è¨ˆ
- ç„¡é™ãƒ«ãƒ¼ãƒ—é˜²æ­¢è¨­è¨ˆ
- ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°è©³ç´°

---

## ðŸŽ‰ å®Œäº†ï¼

ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ãŒå®Œäº†ã—ã¾ã—ãŸã€‚

**æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—**:
1. Claude Codeã§é–‹ç™ºã‚’é–‹å§‹
2. "Stop" ãƒœã‚¿ãƒ³ã§è‡ªå‹•ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ»ä¿®å¾©ã‚’ä½“é¨“
3. PRã‚’ä½œæˆã—ã¦CI/CDã®å‹•ä½œã‚’ç¢ºèª

**é‡è¦ãªãƒã‚¤ãƒ³ãƒˆ**:
- âœ… æœ€å¤§3å›žã§è‡ªå‹•åœæ­¢
- âœ… é‡å¤§ãªå•é¡Œã¯äººé–“ãŒå¯¾å¿œ
- âœ… ã™ã¹ã¦ã®å¤‰æ›´ã¯è¨˜éŒ²ã•ã‚Œã‚‹

---

## ðŸ’¡ ãƒ’ãƒ³ãƒˆ

### åŠ¹çŽ‡çš„ãªä½¿ã„æ–¹

1. **å°ã•ãªå¤‰æ›´ã‹ã‚‰å§‹ã‚ã‚‹**
   - å¤§ããªå¤‰æ›´ã¯ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚‚ä¿®å¾©ã‚‚å¤§å¤‰
   - å°ã•ãåˆ†ã‘ã¦é€²ã‚ã‚‹

2. **ãƒ¬ãƒ“ãƒ¥ãƒ¼çµæžœã‚’ç¢ºèªã™ã‚‹ç¿’æ…£**
   - è‡ªå‹•ä¿®å¾©ã‚’ç›²ä¿¡ã—ãªã„
   - çµæžœã‚’å¿…ãšç¢ºèª

3. **é‡å¤§åº¦Highã¯å³åº§ã«å¯¾å¿œ**
   - è‡ªå‹•ä¿®å¾©ã§ããªã„å•é¡Œã¯æ—©ã‚ã«å¯¾å‡¦
   - æ”¾ç½®ã™ã‚‹ã¨ä¿®å¾©ãƒ«ãƒ¼ãƒ—ã®éšœå®³ã«

4. **çŠ¶æ…‹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å®šæœŸçš„ã«ãƒªã‚»ãƒƒãƒˆ**
   - é•·æœŸé–“ä½¿ç”¨ã™ã‚‹ã¨çŠ¶æ…‹ãŒè“„ç©
   - åŒºåˆ‡ã‚Šã®è‰¯ã„ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ãƒªã‚»ãƒƒãƒˆ

---

## ðŸ†˜ ã‚µãƒãƒ¼ãƒˆ

å•é¡ŒãŒè§£æ±ºã—ãªã„å ´åˆï¼š

1. [ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°](#ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°) ã‚’ç¢ºèª
2. [è©³ç´°ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](docs/13_é–‹ç™ºç’°å¢ƒï¼ˆdevelopment-environmentï¼‰/claude-auto-repair-v3.md) ã‚’ç¢ºèª
3. [GitHub Issues](https://github.com/Kensan196948G/backup-management-system/issues) ã§è³ªå•

---

**Happy Coding with Claude! ðŸš€**
